# Rust æƒå¨æŒ‡å— - ç¬”è®°

[TOC]

## ç¬¬1ç«  å…¥é—¨

### å®‰è£…

#### Linux \ Mac

```bash
curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh
echo 'export PATH="$HOME/.cargo/bin:$PATH"' >> ~/.bash_profile
```



#### Windows

**ä¸‹è½½å·¥å…·**

```bat
# åœ¨ä¸‹è½½ç³»ç»Ÿç›¸å¯¹åº”çš„ Rust å®‰è£…ç¨‹åº
https://www.rust-lang.org/learn/get-started
# ä¸€è·¯é»˜è®¤å³å¯
PS C:\Users\NAME> rustup-init.exe
......
Current installation options:

   default host triple: x86_64-pc-windows-msvc
     default toolchain: stable (default)
               profile: default
  modify PATH variable: yes

1) Proceed with installation (default)
2) Customize installation
3) Cancel installation
# 
rustup toolchain install stable-x86_64-pc-windows-gnu 
rustup default stable-x86_64-pc-windows-gnu
```



#### ä½¿ç”¨Cargoåˆ›å»ºä¸€ä¸ªé¡¹ç›®

```bash
cargo new hello_cargo
cd hello_cargo
```



**æ–‡ä»¶ Cargo.toml (Tom's Obvious, Minimal Language)**

```json
# è¡¨ç¤ºæ¥ä¸‹æ¥çš„è¯­å¥ä¼šä½¿ç”¨ä¸é…ç½®å½“å‰çš„ç¨‹åºåŒ…;
[package]
name = "hello_cargo"
version = "0.1.0"
edition = "2021"
author = ["Your Name <you@example.com>"]

# è¡¨ç¤ºéšåçš„åŒºåŸŸç”¨æ¥å£°æ˜é¡¹ç›®çš„ä¾èµ–;
# åœ¨Rustä¸­ï¼ŒæŠŠä»£ç çš„é›†åˆç§°ä½œåŒ…;
[dependencies]
```

- crate 	  ->    å•å…ƒåŒ…
- package  ->   åŒ…

**ä¸€ä¸ªHello Worldç¨‹åº**

```rust
fn main() {
	println!("Hello, world.");
}
```

**æ–‡ä»¶ Cargo.lock **

- é¦–æ¬¡ä½¿ç”¨å‘½ä»¤`cargo build` çš„æ—¶å€™ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º`Cargo.lock`çš„æ–°æ–‡ä»¶;

- è®°å½•å½“å‰é¡¹ç›®æ‰€æœ‰ä¾èµ–åº“çš„å…·ä½“ç‰ˆæœ¬å·;

**å‘½ä»¤ cargo run**

- æ„å»ºé¡¹ç›®å¹¶è¿è¡Œï¼›
- æ„å»ºäº§ç”Ÿçš„ç»“æœä¼šè¢«cargoå­˜å‚¨åˆ°`target/debug`ç›®å½•ä¸‹ï¼›

**å‘½ä»¤ cargo check**

- å¿«é€Ÿæ£€æµ‹å½“å‰ä»£ç æ˜¯å¦å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼›

**å‘½ä»¤ cargo build --release**

- åœ¨ä¼˜åŒ–æ¨¡å¼ä¸‹æ„å»ºå¹¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼›
- ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¼šè¢«å­˜å‚¨åœ¨`target/release`ç›®å½•ä¸‹ï¼›
- æ­¤æ¨¡å¼ä¼šä»¥æ›´é•¿çš„ç¼–è¯‘æ—¶é—´ä¸ºä»£ä»·æ¥ä¼˜åŒ–ä»£ç ï¼Œä½¿ä»£ç æ‹¥æœ‰æ›´å¥½çš„è¿è¡Œæ—¶æ€§èƒ½ï¼›

**å‘½ä»¤ cargo run --release**



## ç¬¬2ç«  ç¼–å†™ä¸€ä¸ªçŒœæ•°æ¸¸æˆ

```rust
use std::io;

fn main() {
    println!("Guess the number!");
    println!("Please input your guess.");
	// åˆ›å»ºä¸€ä¸ªå­˜å‚¨ç”¨æˆ·è¾“å…¥æ•°æ®çš„åœ°æ–¹
    let mut guess = String::new();
    io::stdin().read_line(&mut guess).expect("Failed to read line.");

    println!("you guessed: {}", guess);
}
```

**ä»£ç è§£æ**

- `let` ï¼šå£°æ˜å˜é‡çš„è¯­å¥ï¼Œ(é»˜è®¤) å£°æ˜çš„å˜é‡ä¸èƒ½äºŒæ¬¡æ”¹å˜ï¼›
- `let mut guess = 0;` ï¼šå£°æ˜äº†ä¸€ä¸ªå¯å˜çš„å˜é‡ï¼›
- `String::new()`ï¼š`String`æ˜¯æ ‡å‡†åº“ä¸­ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼Œå†…éƒ¨ä½¿ç”¨äº†`UTF-8`ï¼Œ`new`æ˜¯`String`ç±»å‹çš„å…³è”å‡½æ•°(associated function)ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºç™½å­—ç¬¦ä¸²ï¼›
- `&`ï¼šè¡¨ç¤º**å¼•ç”¨**çš„æ„æ€ï¼›
- `&mut guess`ï¼šå¼•ç”¨`mut` è®©`guess`ä¸ºå¯å˜çŠ¶æ€ï¼Œä½†å‰ææ˜¯`guess`æ˜¯ä¸€ä¸ªå¯å˜å˜é‡;
- `use std::io` ï¼š `use`ç”¨æ¥æ˜¾å¼çš„è¿›è¡Œå¯¼å…¥å£°æ˜ï¼Œ`std` ä¸€ä¸ª`rust`çš„æ ‡å‡†åº“ï¼Œæˆ‘ä»¬ç”¨æ¥å¯¼å…¥äº†å…¶ä¸­`io`æ¨¡å—ï¼›
- `io::stdin()`ï¼šè°ƒç”¨`io`æ¨¡å—ä¸­çš„å…³è”å‡½æ•°`stdin`ï¼Œå®ƒè¢«ç”¨ä½œå¥æŸ„æ¥å¤„ç†ç»ˆç«¯ä¸­çš„æ ‡å‡†è¾“å…¥ï¼›
- `.read_line(&mut guess)` ï¼šè°ƒç”¨æ ‡å‡†å¥æŸ„çš„`read_line`æ–¹æ³•æ¥è·å–ç”¨æˆ·çš„è¾“å…¥ï¼Œå®ƒéœ€è¦ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”ä¼ å…¥çš„å˜é‡æ˜¯å¯å˜çš„ï¼Œç„¶åå°†è·å–çš„æ•°æ®ä¼ å…¥`guess`å˜é‡ä¸­ï¼Œå¹¶è¿”å›ä¸¤ä¸ª`Resule`ç±»å‹çš„å€¼`Ok`å’Œ`Err`ï¼›
- `expect("Failed.")`ï¼šç”¨æ¥å¤„ç†Resultç±»å‹çš„è¡¨è¾¾å¼ï¼Œæ¥æ”¶`OK`ä¸`Err`ï¼Œå¦‚æœè¿”å›çš„æ˜¯`Err`ï¼Œåˆ™æ‰“å°`Failed.`ï¼›
- `println!("{}", guess);` ï¼šä»£ç ä¸­`{}`è¡¨ç¤ºåº”ç”¨å˜é‡`guess`ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œä½†é¡ºåºæ’åˆ—æ˜¾ç¤ºï¼›

```rust
let foo = 5;	// foo æ˜¯ä¸å¯å˜çš„
let mut bar = 5;// bar æ˜¯å¯å˜çš„
```

- `Result`ï¼šæšä¸¾ç±»å‹ï¼Œæšä¸¾ç±»å‹æœ‰ä¸€ç³»åˆ—å›ºå®šçš„å€¼ç»„åˆè€Œæˆï¼Œæ‹¥æœ‰ä¸¤ä¸ªå˜ä½“`OK`å’Œ`Err`ï¼Œå…¶ä¸­`Ok` è¡¨ç¤ºæ“ä½œæ‰§è¡Œ**æˆåŠŸ**ï¼Œ`Err`è¡¨ç¤ºæ“ä½œæ‰§è¡Œ**å¤±è´¥**ï¼›

### ç”Ÿæˆä¸€ä¸ªéšæœºæ•°

```rust
use std::io;
use rand::Rng;

fn main(){
        println!("Guess the number!");
        let secret_number = rand::thread_rng().gen_range(1, 101);
        println!("The secret number is: {}", secret_number);
    
    println!("Plese input your guess.");
    let mut guess = String::new();
    io::stdin().read_line(&mut guess).expect("Failed to read line!");
    
    println!("You guessed: {}", guess);

}
```

**ä»£ç è§£æ**

- `rand::Rng`ï¼šå®šä¹‰äº†éšæœºæ•°ç”Ÿæˆå™¨éœ€è¦å®ç°çš„æ–¹æ³•é›†åˆï¼›
- `rand::thread_rng()`ï¼šä¼šè¿”å›ä¸€ä¸ªç‰¹å®šçš„éšæœºæ•°ï¼Œå®ƒä½äºæœ¬åœ°çº¿ç¨‹ç©ºé—´ï¼Œå®ƒçš„éšæœºæ•°ç©ºé—´åŒ…å«ä¸‹é™ä½†ä¸åŒ…å«ä¸Šé™ï¼›

- `.gen_range(1, 101)`ï¼šç”¨è¯¥æ–¹æ³•æ¥è¿‡å»æŒ‡å®šç©ºé—´çš„éšæœºæ•°ï¼ŒåŒ…å«1ï¼Œä½†ä¸åŒ…å«101ï¼Œå³ç”Ÿæˆ1-100ä¹‹é—´çš„éšæœºæ•°ï¼›

### æ¯”è¾ƒçŒœæµ‹çš„æ•°å­—ä¸ä¿å¯†æ•°å­—

```rust
use std::io;
use std::cmp::Ordering;
use rand::Rng;

fn main(){
    println!("Guess the number!");
    let secret_number:u32 = rand::thread_rng().gen_range(1, 101);
    println!("The secret number is: {}",  secret_number);

    println!("Plese input your guess.");
    let mut guess = String::new();
    io::stdin().read_line(&mut guess).expect("Failed to read line!");
// -----------æ·»åŠ ------------
    let guess: u32 = guess.trim().parse().expect("Please type a number!");
// --------------------------
    println!("You guessed: {}", guess);
// -----------æ·»åŠ ------------
    match guess.cmp(&secret_number) {
        Ordering::Less => println!("Too small!"),
        Ordering::Greater => println!("Too big!"),
        Ordering::Equal => println!("You win!"),
    }
}
```

**ä»£ç è§£æ**

- `std::cmp::Ordering`ï¼šæšä¸¾ç±»å‹ï¼Œä¸`Result`ç›¸åŒï¼Œä½†æ˜¯å®ƒæœ‰3ä¸ªå˜ä½“ï¼š`Less | Greater | Equal`ï¼›
- `match `ï¼šåŸºäºæ¨¡å¼åŒ¹é…çš„æ§åˆ¶æµï¼Œç”¨äºæœ‰æ¡ä»¶åœ°è¿è¡Œä»£ç ã€‚å¿…é¡»æ˜¾å¼åœ°æˆ–é€šè¿‡åœ¨åŒ¹é…ä¸­ä½¿ç”¨ç­‰é€šé…ç¬¦å½»åº•åœ°å¤„ç†æ¯ä¸ªæ¨¡å¼ã€‚å› ä¸ºmatchæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è¿”å›å€¼ã€‚
- `guess.cmp(&secret_number)`ï¼š`cmp`ä¸ºä»»ä½•å¯æ¯”è¾ƒçš„å€¼ï¼Œç±»å‹è®¡ç®—å‡ºå®ƒä»¬æ¯”è¾ƒåçš„ç»“æœï¼›
- `Ordering::Less` :  è¿™é‡Œè¡¨ç¤º`guess`å°äº`secret_number`;
- `Ordering::Greater` :  è¿™é‡Œè¡¨ç¤º`guess`å¤§äº`secret_number`;
- `Ordering::Equal` :  è¿™é‡Œè¡¨ç¤º`guess`ç­‰äº`secret_number`;
- `.trim()`ï¼šè¿”å›ä¸€ä¸ªå»æ‰é¦–å°¾æ‰€æœ‰ç©ºç™½å­—ç¬¦çš„æ–°å­—ç¬¦ä¸²ï¼›
- `.parse()`ï¼šå°è¯•å°†å½“å‰å­—ç¬¦ä¸²è§£æä¸ºæŸä¸ªæ•°å€¼ï¼›
- `u32`ï¼šåªèƒ½é€šè¿‡æ•°å­—å­—ç¬¦è½¬æ¢è€Œæ¥ï¼›

### æœ€åå®Œæˆæ‰€æœ‰ä¿®æ”¹ï¼šå¾ªç¯ï¼Œéæ³•è¾“å…¥ï¼Œ

```rust
use std::io;
use std::cmp::Ordering;
use rand::Rng;

fn main(){
    println!("Guess the number!");

    let secret_number:u32 = rand::thread_rng().gen_range(1, 101);

    loop {
        println!("Please input your guess.");
        let mut guess = String::new();
        io::stdin().read_line(&mut guess).expect("Failed to read line!");

        let guess: u32 = match guess.trim().parse() { // ä¿®æ”¹
            Ok(num) => num, 	// ä¿®æ”¹
            Err(_) => continue,	// ä¿®æ”¹
        };

        println!("You guessed: {}", guess);
        
        match guess.cmp(&secret_number) {
            Ordering::Less => println!("Too small!"),
            Ordering::Greater => println!("Too big!"),
            Ordering::Equal => {		// ä¿®æ”¹
                println!("You win!");	// ä¿®æ”¹
                break;	// ä¿®æ”¹
            }
        }
    }
}
```

**ä»£ç è§£æ**

- `loop`ï¼šæ— é™åå¤å¾ªç¯ï¼›
- `break`ï¼šé€€å‡ºå¾ªç¯ï¼›
- `continue`ï¼šè·³å‡ºè‡³ä¸‹ä¸€æ¬¡å¾ªç¯
- ç¬¬15è¡Œï¼šä½¿ç”¨`match`è¡¨è¾¾å¼æ›¿æ¢`expect`æ–¹æ³•ï¼Œ`parse`ä¼šè¿”å›ä¸€ä¸ª`Result`ç±»å‹ï¼ŒåªåŒ…å«`Ok`å’Œ`Err`ï¼Œä½¿ç”¨`match`å¯ä»¥åƒå¤„ç†`cmp`æ–¹æ³•çš„è¿”å›å€¼`Ordering`ä¸€æ ·ï¼Œåªæ˜¯ä¸‰ä¸ªè¿”å›å€¼ï¼Œç°åœ¨å˜æˆäº†ä¸¤ä¸ªï¼›



## ç¬¬3ç«  é€šç”¨ç¼–ç¨‹æ¦‚å¿µ

### å˜é‡ä¸å¯å˜æ€§

- Rust ä¸­çš„å˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼›

å½“ä¸€ä¸ªå˜é‡æ˜¯ä¸å¯å˜æ—¶ï¼Œä¸€æ—¦å®ƒè¢«ç»‘å®šåˆ°æŸä¸ªå€¼ä¸Šé¢ï¼Œè¿™ä¸ªå€¼å°±å†ä¹Ÿæ— æ³•è¢«æ”¹å˜ï¼š

```rust
fn main(){
    let x = 5;
    println!("The value of x is: {}", x);
// ------ å›  x = 5ä¸ºä¸å¯å˜å˜é‡ï¼Œæ‰€ä»¥ä¸‹é¢è¿™è¡Œèµ‹å€¼å°†å‘ç”Ÿç¼–è¯‘é”™è¯¯ï¼›
	x = 6;
    println!("The value of x is: {}", x);
}
/* ------------ é”™è¯¯ä¿¡æ¯ -----------
error[E0384]: cannot assign twice to immutable variable `x`
 --> src/main.rs:5:2
  |
2 |     let x = 5;
  |         -
  |         |
  |         first assignment to `x`
  |         help: consider making this binding mutable: `mut x`
...
5 |     x = 6;
  |     ^^^^^ cannot assign twice to immutable variable
*/
```

- ä¸èƒ½å¯¹ä¸å¯å˜å˜é‡äºŒæ¬¡èµ‹å€¼
- åœ¨å£°æ˜çš„å˜é‡åå‰æ·»åŠ `mut`å…³é”®å­—å¯ä»¥ä½¿å¾—å˜é‡ä¸ºå¯å˜ï¼›

```rust
fn main(){
    let mut x = 5;
    println!("The value of x is: {}", x);
    x = 6;
    println!("The value of x is: {}", x);
}
/* è¾“å‡ºç»“æœï¼š
The value of x is: 5
The value of x is: 6
*/
```

### å˜é‡ä¸å¸¸é‡ä¹‹é—´çš„ä¸åŒ

- å¸¸é‡ï¼ˆconstantï¼‰ï¼šå¸¸é‡ä¸ä»…æ˜¯é»˜è®¤ä¸å¯å˜ï¼Œå®ƒè¿˜æ€»æ˜¯ä¸å¯å˜çš„ï¼›
- ä½ éœ€è¦ä½¿ç”¨`const`å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªå¸¸é‡ï¼›
- å¸¸é‡éœ€è¦æ ‡æ³¨ç±»å‹
- å¸¸é‡å¯ä»¥è¢«å£°æ˜åœ¨ä»»ä½•ä½œç”¨åŸŸä¸­ï¼ŒåŒ…æ‹¬å…¨å±€å˜é‡ï¼›
- åªèƒ½å°†å¸¸é‡ç»‘å®šåˆ°å¸¸é‡è¡¨è¾¾å¼ä¸Šï¼Œä¸èƒ½ä½œä¸ºå‡½æ•°è¿”å›å€¼ï¼›

å°†æ•°å€¼100000ç»‘å®šåˆ°MAX_POINTSä¸Šï¼Œåœ¨Rustç¨‹åºä¸­ï¼Œé€šå¸¸ä½¿ç”¨è¿‡â€œä¸‹åˆ’çº¿`_`åˆ†å‰²å¤§å†™å­—æ¯â€æ¥å‘½åä¸€ä¸ªå¸¸é‡äº†ï¼›

å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿`_`åˆ†å‰²æ•°å€¼ï¼Œæ¥å¢åŠ å¯è¯»æ€§ï¼›

```rust
const MAX_POINTS:u32 = 100_000;
```

### éšè—

- éšè—ï¼ˆshadowï¼‰ç¬¬ä¸€ä¸ªå˜é‡è¢«ç¬¬äºŒä¸ªå˜é‡éšè—ï¼Œæ„å‘³ç€éšåä½¿ç”¨è¿™ä¸ªå˜é‡åç§°æ—¶ï¼Œå®ƒæŒ‡å‘çš„å°†æ˜¯ç¬¬äºŒä¸ªå˜é‡ï¼›

```rust
fn main(){
    let x = 5;
    let x = x + 1;  // x = 6
    let x = x * 2;	// x = 12
    println!("The value of x is: {}", x);
}
/* è¾“å‡ºç»“æœï¼š
The value of x is: 12
*/
```

**ä»£ç è§£æ**

é¦–å…ˆxç»‘å®šåˆ°5ä¸Šï¼Œéšååˆé€šè¿‡`let`è¯­å¥éšè—äº†ç¬¬ä¸€ä¸ªxå˜é‡ï¼Œå¹¶å°†ç¬¬ä¸€ä¸ªxå˜é‡å€¼åŠ ä¸Š1çš„è¿ç®—ç»“æœç»‘å®šåˆ°æ–°çš„å˜é‡xä¸Šï¼Œæ­¤æ—¶xçš„å€¼æ˜¯6ï¼›ä»¥æ­¤ç±»æ¨ï¼›

- éšè—æœºåˆ¶ä¸åŒäºå°†ä¸€ä¸ªå˜é‡å£°æ˜ä¸º`mut`ï¼Œå› ä¸ºå¦‚æœä¸æ˜¯åœ¨ä½¿ç”¨`let`å…³é”®å­—çš„æƒ…å†µä¸‹é‡æ–°ä¸ºè¿™ä¸ªå˜é‡èµ‹å€¼ï¼Œä»¥ä¸Šä»£ç å°†ä¼šç¼–è¯‘å‘ç”Ÿé”™è¯¯ï¼›
- é€šè¿‡ä½¿ç”¨`let`ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è¿™ä¸ªå€¼æ‰§è¡Œä¸€ç³»åˆ—çš„**å˜æ¢æ“ä½œ**ï¼Œå¹¶ä¸”å…è®¸è¿™ä¸ªå˜é‡åœ¨æ“ä½œå®Œæˆåä»»ç„¶**ä¿æŒæ— å¯å˜æ€§**ï¼›

- `shadow`ä¸`mut`å¦ä¸€ä¸ªåŒºåˆ«åœ¨äºï¼šé‡å¤ä½¿ç”¨`let`åˆ›å»ºå‡ºæ–°çš„å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥å¤ç”¨å˜é‡åç§°çš„åŒæ—¶æ”¹å˜å®ƒçš„ç±»å‹ï¼›

ä¾‹å¦‚ï¼šç¨‹åºéœ€è¦ç”¨æˆ·è¾“å…¥ç©ºæ ¼æ•°é‡æ¥å†³å®šæ–‡æœ¬ä¹‹é—´çš„è·ç¦»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æŠŠè¾“å…¥çš„ç©ºæ ¼å­˜å‚¨ä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ•°å€¼ï¼š

```rust
let spaces = "    ";		// æ­¤æ—¶ï¼šspacesçš„ç±»å‹ä¸º &str
let spaces = spaces.len();	// æ­¤æ—¶ï¼šspacesçš„ç±»å‹ä¸º usize
```

å¦‚æœä½¿ç”¨`mut`æ¨¡æ‹Ÿç±»ä¼¼çš„æ•ˆæœï¼Œå°†ä¼šç¼–è¯‘é”™è¯¯ï¼Œæç¤ºè¦æ±‚åˆ é™¤`mut`å…³é”®å­—ï¼š

```rust
let mut spaces = "    ";
let spaces = spaces.len(); 

/* è¾“å‡ºç»“æœï¼š
warning: variable does not need to be mutable
 --> src/main.rs:2:9
  |
2 |     let mut spaces = "    ";
  |         ----^^^^^^
  |         |
  |         help: remove this `mut`
*/
```

### æ•°æ®ç±»å‹

- æ•°æ®ç±»å‹å­é›†åˆ†ä¸¤ç§ï¼š**æ ‡é‡ç±»å‹**(scalar) å’Œ **å¤åˆç±»å‹**(compound)ï¼›
- Rustä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½æœ‰å…¶ç‰¹å®šçš„æ•°æ®ç±»å‹ï¼›
- Rustä¼šæ ¹æ®æ•°æ®çš„ç±»å‹æ¥å†³å®šåº”è¯¥å¦‚ä½•å¤„ç†å®ƒä»¬ï¼›
- Rustæ˜¯ä¸€é—¨é™æ€ç±»å‹è¯­è¨€ï¼Œå®ƒåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­éœ€è¦ä¸­çš„æ‰€æœ‰å˜é‡çš„å…·ä½“ç±»å‹ï¼›
- å¤§éƒ¨åˆ†æƒ…å†µä¸‹ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ï¼›

ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨`parse`å°†ä¸€ä¸ª`String`ç±»å‹è½¬æ¢ä¸º`u32`ç±»å‹æ—¶ï¼Œå°±å¿…é¡»æ˜¾å¼çš„åœ¨å˜é‡åç§°åé¢ï¼Œæ·»åŠ ä¸€ä¸ªç±»å‹æ ‡æ³¨ï¼š

```rust
let guess: u32 = "42".parse().expect("Not a number");
```

- ç¼–è¯‘å™¨æ— æ³•è‡ªåŠ¨æ¨å¯¼å‡ºå˜é‡çš„ç±»å‹ï¼Œä¸ºäº†é¿å…æ··æ·†ï¼Œéœ€è¦æ‰‹åŠ¨åœ°æ·»åŠ ç±»å‹æ ‡æ³¨ï¼›

### æ ‡é‡ç±»å‹

- æ ‡é‡ç±»å‹æ˜¯å•ä¸ªå€¼ç±»å‹çš„ç»Ÿç§°ï¼›
- Rustä¸­å†…å»ºäº†4ä¸­åŸºç¡€çš„æ ‡é‡ç±»å‹ï¼šæ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œå¸ƒå°”å€¼ï¼Œå­—ç¬¦ï¼›

#### æ•´æ•°ç±»å‹

- æ•´æ•°æ˜¯æŒ‡é‚£äº›æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ï¼›
- æ•´æ•°åˆ†ä¸ºï¼šä»¥( i )å¼€å¤´çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œä»¥( u )å¼€å¤´çš„æ— ç¬¦å·æ•´æ•°ï¼›
- Rustä¸­çš„æ•´æ•°ç±»å‹æœ‰ï¼š

|  é•¿åº¦   | æœ‰ç¬¦å· | æ— ç¬¦å· |
| :-----: | :----: | :----: |
|  8-bit  |   i8   |   u8   |
| 16-bit  |  i16   |  u16   |
| 32-bit  |  i32   |  u32   |
| 64-bit  |  i64   |  u64   |
|  arch   | isize  | usize  |
| 128-bit |  i128  |  u128  |

- æœ‰ç¬¦å·ä¸æ— ç¬¦å·ä»£è¡¨äº†ä¸€ä¸ªæ•´æ•°æ˜¯å¦æ‹¥æœ‰æè¿°è´Ÿæ•°çš„èƒ½åŠ›ï¼›
- æ— ç¬¦å·çš„æ•´æ•°ç±»å‹ï¼Œæ•°å€¼æ°¸è¿œä¸ºæ­£ï¼Œä¸éœ€è¦ç¬¦å·ï¼›
- æœ‰ç¬¦å·çš„æ•´æ•°ç±»å‹ï¼Œé€šè¿‡äºŒè¿›åˆ¶è¡¥ç çš„å½¢å¼æ¥å­˜å‚¨ï¼Œæ‰€ä»¥å¯ä»¥æ˜¯æ­£( + )ä¹Ÿå¯ä»¥æ˜¯è´Ÿ( - )ï¼›
- å¯¹ä¸€ä¸ªä½æ•°ä¸ºnçš„æœ‰ç¬¦å·æ•´æ•°ï¼Œå®ƒå¯ä»¥å­˜å‚¨æ€» -(2^n-1^) åˆ° 2^n-1^ -1 èŒƒå›´å†…æ‰€æœ‰çš„æ•´æ•°ï¼›
    - ä¾‹å¦‚ä»¥`i8`æ¥è®²ï¼šå®ƒå¯ä»¥å­˜å‚¨ -(2^8-1^) åˆ° 2^8-1^ -1ï¼Œä¹Ÿå°±æ˜¯æ€» -128åˆ°127ä¹‹é—´çš„æ‰€æœ‰æ•´æ•°ï¼›

- å¯¹ä¸€ä¸ªä½æ•°ä¸ºnçš„æ— ç¬¦å·æ•´æ•°ï¼Œå®ƒå¯ä»¥å­˜å‚¨æ€»0 åˆ° 2^n^ -1 èŒƒå›´å†…æ‰€æœ‰çš„æ•´æ•°ï¼›
    - ä¾‹å¦‚ä»¥`u8`æ¥è®²ï¼šå®ƒå¯ä»¥å­˜å‚¨ 0åˆ° 2^8^ -1ï¼Œä¹Ÿå°±æ˜¯æ€» 1åˆ° 255 ä¹‹é—´çš„æ‰€æœ‰æ•´æ•°ï¼›


- `isize`ä¸`usize`è¿™ä¸¤ç§ç‰¹æ®Šçš„æ•´æ•°ç±»å‹ï¼Œå®ƒä»¬çš„é•¿åº¦å–å†³äºç¨‹åºè¿è¡Œçš„ç›®æ ‡å¹³å°ï¼›
    - åœ¨64ä½æ¶æ„ä¸Šå°±æ˜¯64ä½ï¼Œè€Œåœ¨32ä½æ¶æ„ä¸Šï¼Œå®ƒä»¬å°±æ˜¯32ä½çš„ï¼›

**Rustä¸­çš„æ•´æ•°å­—é¢é‡**

| è¿›åˆ¶     | æ•´æ•°å­—é¢é‡    | ç¤ºä¾‹        |
| -------- | ------------- | ----------- |
| åå…­è¿›åˆ¶ | Hex           | 0xff        |
| åè¿›åˆ¶   | Decimal       | 98_222      |
| å…«è¿›åˆ¶   | Octal         | 0o77        |
| äºŒè¿›åˆ¶   | Binary        | 0b1111_0000 |
| ä½(Byte) | Byte(u8 only) | b'A'        |

- é™¤äº†Byteï¼Œå…¶ä½™æ‰€æœ‰çš„å­—é¢é‡éƒ½å¯ä»¥ä½¿ç”¨ç±»å‹åç¼€
    - æ¯”å¦‚ `57u8` ï¼Œä»£è¡¨ä¸€ä¸ªä½¿ç”¨`u8`ç±»å‹çš„æ•´æ•°`57`ï¼›
- å¯ä»¥ä½¿ç”¨ ä¸‹åˆ’çº¿`_` ä½œä¸ºåˆ†éš”ç¬¦ä»¥æ–¹ä¾¿è¯»æ•°ï¼›
- Rustå¯¹äºæ•´æ•°å­—é¢é‡ï¼Œé»˜è®¤æ¨å¯¼ç±»å‹ä½`i32`ï¼Œé€šå¸¸å°±æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œå³ä¾¿æ˜¯åœ¨64ä½ç³»ç»Ÿä¸Šä¹Ÿæ˜¯å¦‚æ­¤ï¼›
- `usize`å’Œ`isize` åˆ™ä¸»è¦ç”¨ä½œæŸäº›é›†åˆçš„ç´¢å¼•ï¼›

**æ•´æ•°æº¢å‡º**

å‡è®¾ä¸€ä¸ªu8ç±»å‹çš„å˜é‡ï¼Œå­˜å‚¨0 - 255èŒƒå›´çš„æ•°å­—ï¼Œå¦‚æœä¿®æ”¹å˜é‡å€¼ä¸º256ï¼Œåˆ™ä¼šå‘ç”Ÿæ•´æ•°æº¢å‡ºï¼›

- å½“æ•´æ•°å˜é‡ä¸­çš„å€¼è¶…å‡ºå‚¨å­˜èŒƒå›´æ—¶ï¼Œå°±ä¼šå‘ç”Ÿæ•´æ•°æº¢å‡ºï¼›
- Debugæ¨¡å¼ä¸‹ç¼–è¯‘æ—¶å‡ºç°æ•´æ•°æº¢å‡ºï¼Œä¼šè§¦å‘ç¨‹åºçš„ææ…Œ(panic)ï¼Œæè¿°ç¨‹åºå› é”™è¯¯è€Œé€€å‡ºï¼›
- releaseæ¨¡å¼ä¸‹ç¼–è¯‘å°±ä¸ä¼šåŒ…å«é‚£äº›å¯èƒ½ä¼šè§¦å‘ææ…Œ(panic)çš„æ£€æŸ¥ä»£ç ï¼Œä½œä¸ºæ›¿ä»£ï¼ŒRustä¼šåœ¨æº¢å‡ºå‘ç”Ÿæ—¶æ‰§è¡ŒäºŒè¿›åˆ¶è¡¥ç ç¯ç»•ï¼›æ¢
    - ä»»ä½•è¶…å‡ºç±»å‹æœ€å¤§å€¼çš„æ•°å€¼éƒ½ä¼šè¢«â€œç¯ç»•â€ä¸ºç±»å‹æœ€å°å€¼ï¼›
    - ä»¥u8ä¸ºä¾‹ï¼Œ256ä¼šå˜æˆ0ï¼Œ257ä¼šå˜æˆ1ï¼Œä»¥æ­¤å†…æ¨ï¼›
    - ä»¥æ•´æ•°æº¢å‡ºæ—¶ç¯ç»•è¡Œä¸ºçš„ä»£ç éƒ½åº”è¯¥æœç»ï¼›
    - å¦‚æœå¸Œæœ›æ˜¾å¼åœ°è¿›è¡Œç¯ç»•è¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„ç±»å‹`Wrapping`ï¼›



#### æµ®ç‚¹æ•°ç±»å‹

- Rustä¸­æä¾›äº†ä¸¤ç§åŸºç¡€æµ®ç‚¹æ•°ç±»å‹ï¼š`f32`å’Œ`f64`ï¼Œåˆ†åˆ«å ç”¨`32`ä½ç©ºé—´å’Œ`64`ä½ç©ºé—´ï¼›
- ç”±äºç°ä»£CPUä¸­ `f64` å’Œ `f32` çš„è¿è¡Œæ•ˆç‡ç›¸å·®æ— å‡ ï¼Œ`f64`æ‹¥æœ‰æ›´é«˜çš„ç²¾åº¦ï¼Œæ‰€ä»¥Rusté»˜è®¤ä¼šå°†æµ®ç‚¹æ•°ç±»å‹å­—é¢é‡çš„ç±»å‹æ¨å¯¼ä¸º`f64`ï¼›

å®é™…ä»£ç ä¸­æµ®ç‚¹æ•°å£°æ˜ï¼š

```rust
fn main(){
    let x = 2.0;		// f64
    let y: f32 = 3.0;	// f32
}
```

- Rustçš„æµ®ç‚¹æ•°ä½¿ç”¨äº† IEEE-754 æ ‡å‡†æ¥è¡¨è¿°ï¼šå•ç²¾åº¦( f32 )ï¼ŒåŒç²¾åº¦( f64 )ï¼›

**ç®—æ•°è¿ç®— - ç¤ºä¾‹**

```rust
fn main(){
    // åŠ æ³•
    let sum = 5 + 10;
    // å‡æ³•
    let difference = 96.6 - 3.5;
    // ä¹˜æ³•
    let product = 4 * 30;
    // é™¤æ³•
    let quotient = 56.7 / 32.2;
    // å–ä½™
    let remainder = 43 % 5;
}
```



#### å¸ƒå°”ç±»å‹

- Rustçš„å¸ƒå°”ç±»å‹åªæ‹¥æœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼štureï¼Œfalseï¼›

```rust
fn main(){
    let t = true;
    let f: bool = false; // é™„å¸¦äº†æ˜¾å¼ç±»å‹æ ‡æ³¨çš„è¯­å¥
}
```



#### å­—ç¬¦ç±»å‹

- Rustä¸­`char`ç±»å‹è¢«ç”¨äºæè¿°è¯­è¨€ä¸­æœ€åŸºç¡€çš„å•ä¸ªå­—ç¬¦ï¼›
- `char`ç±»å‹ä½¿ç”¨å•å¼•å·æŒ‡å®šï¼›

```rust
fn main(){
    let c = 'z';
    let z = 'Ğ‘';
    let s = 'ğŸ˜„';
}
```

- `char`ç±»å‹åœ¨4å­—èŠ‚ï¼Œæ˜¯ä¸€ä¸ªUnicodeæ ‡é‡å€¼ï¼Œå¯ä»¥è¡¨è¿°æ¯”ASCIIæ›´å¤šçš„å­—ç¬¦å†…å®¹ï¼›

- Unicodeæ ‡é‡å¯ä»¥æè¿°ä»`U+0000`åˆ°`U+D7FF`ï¼Œä»¥åŠä»`U+E000`åˆ°`U+10FFFF`èŒƒå›´å†…çš„æ‰€æœ‰å€¼ï¼›



### å¤åˆç±»å‹

- å¤åˆç±»å‹å¯ä»¥å°†å¤šä¸ªä¸åŒç±»å‹çš„å€¼ç»„åˆä¸ºä¸€ä¸ªç±»å‹ï¼›
- Rustæä¾›ä¸¤ç§å†…ç½®çš„åŸºç¡€å¤åˆç±»å‹ï¼šå…ƒç»„(tuple)ï¼Œæ•°ç»„(array)ï¼›
- å…ƒç»„ç±»å‹çš„ç´¢å¼•ä»0å¼€å§‹ï¼›

#### å…ƒç»„ç±»å‹

- å…ƒç»„å¯ä»¥å°†å…¶ä»–ä¸åŒç±»å‹çš„å¤šä¸ªå€¼ç»„åˆè¿›ä¸€ä¸ªå¤åˆç±»å‹ï¼›

- å…ƒç»„å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªå›ºå®šçš„é•¿åº¦ï¼Œä½ æ— æ³•åœ¨å£°æ˜ç»“æŸåå¢åŠ æˆ–å‡å°‘å…¶ä¸­çš„å…ƒç´ æ•°é‡ï¼›

    - ä¸ºäº†åˆ›å»ºå…ƒç»„æˆ‘ä»¬éœ€è¦æŠŠä¸€ç³»åˆ—çš„å€¼ä½¿ç”¨é€—å·åˆ†éš”åæ”¾ç½®åˆ°ä¸€å¯¹æ‹¬å·ä¸­ï¼›
    - æ¯ä¸ªä½ç½®çš„å€¼éƒ½æœ‰ä¸€ä¸ªç±»å‹ï¼Œè¿™äº›ç±»å‹ä¸éœ€è¦æ˜¯ç›¸åŒçš„ï¼›


 **åˆ›å»ºå…ƒç»„** ä¾‹å­ï¼š

```rust
fn main(){
let tup: (i32, f64, u8) = (500, 6.4, 1);
}
```

**ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è§£æ„å…ƒç»„** ä¾‹å­ï¼š
    

```rust
fn main(){
    let tup = (500, 6.4, 1);
    let (x, y, z) = tup;
    println!("The value of y is: {}", y);
}
/* è¾“å‡ºç»“æœï¼š
The value of y is: 6.4
*/
```
**ä»£ç è§£æï¼š**
    é¦–å…ˆåˆ›å»ºä¸€ä¸ªå…ƒç»„ï¼Œå°†æ•°å€¼ç»‘å®šåˆ°å˜é‡`tup`ä¸Šï¼Œéšåletçš„å³ä¾§ä½¿ç”¨äº†ä¸€ä¸ªæ¨¡å¼å°†`tup`æ‹†åˆ†ä¸º3ä¸ªä¸åŒçš„éƒ¨åˆ†ï¼š`x, y, z`ï¼Œè¿™ä¸ªåˆ›å»ºè¢«ç§°ä¸º**è§£æ„**(Destructuring)ï¼Œæœ€åå°†`y`çš„å€¼æ‰“å°å‡ºæ¥å°±æ˜¯`6.4`ã€‚
	
é™¤äº†è§£æ„ï¼Œè¿˜å¯ä»¥**é€šè¿‡ç´¢å¼•å¹¶ä½¿ç”¨ç‚¹å·( . )æ¥è®¿é—®å…ƒç»„ä¸­çš„å€¼**ï¼Œä¾‹å­ï¼š

```rust
fn main(){
    let x: (i32, f64, u8) = (500, 6.4, 1);
    let five_hundred = x.0;
    let six_point_four = x.1;
    let one = x.2;
}
```

**ä»£ç è§£æï¼š**
	åˆ›å»ºä¸€ä¸ªå…ƒç»„xï¼Œéšåé€šè¿‡ç´¢å¼•è®¿é—®å…ƒç»„ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œå¹¶å°†å®ƒä»¬çš„å€¼ç»‘å®šåˆ°æ–°çš„å˜é‡ä¸Šï¼›



#### æ•°ç»„ç±»å‹

- æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å¿…é¡»æ˜¯æƒ³åŒç±»å‹çš„ï¼›
- Rustä¸­çš„æ•°ç»„æ‹¥æœ‰å›ºå®šçš„é•¿åº¦ï¼Œä¸€æ—¦å£°æ˜ä¸èƒ½éšæ„æ›´æ”¹å¤§å°ï¼›
- æ•°ç»„ç”±ä¸€æ•´å—åˆ†é…åœ¨æ ˆä¸Šçš„å†…å­˜ç»„æˆï¼›
- æ•°ç»„ç±»å‹çš„ç´¢å¼•ä»0å¼€å§‹ï¼›



**åˆ›å»ºæ•°ç»„**(ç”¨é€—å·åˆ†éš”å€¼ï¼Œæ”¾ç½®åœ¨ä¸€å¯¹æ–¹æ‹¬å·ä¸­) ä¾‹å­ï¼š

ä¾‹å­1ï¼šåˆ›å»ºæ•°ç»„å…¶ä¸­æœ‰5ä¸ªå…ƒç´ ï¼Œè€Œå€¼çš„ç±»å‹ç”±Rustè‡ªåŠ¨æ¨å¯¼ï¼›

ä¾‹å­2ï¼šåœ¨åˆ›å»ºçš„æ•°ç»„å˜é‡åç§°åé¢æŒ‡å®šè¯¥æ•°ç»„ä¸ºi32ç±»å‹ï¼Œå¹¶ä¸”æ‹¥æœ‰5ä¸ªå…ƒç´ ï¼Œç±»å‹ä¸å…ƒç´ æ•°é‡ä¹‹é—´ç”¨åˆ†å·åˆ†éš”ï¼›

```rust
// ä¾‹å­1
let a = [1, 2, 3, 4, 5]ï¼›	
// ä¾‹å­2
let a: [i32; 5] = [1, 2, 3, 4, 5];	
```



**åˆ›å»ºä¸€ä¸ªå«æœ‰ç›¸åŒå…ƒç´ çš„æ•°ç»„** ä¾‹å­ï¼š

æ•°ç»„å˜é‡aå°†æ‹¥æœ‰5ä¸ªå…ƒç´ ï¼Œè¿™äº›å…ƒç´ å…¨éƒ¨éƒ½æ‹¥æœ‰ç›¸åŒçš„åˆå§‹å€¼3ï¼›

```rust
let a = [3; 5];
// ä»¥ä¸Šç­‰ä»·äº
let a = [3, 3, 3, 3, 3];
```



**è®¿é—®æ•°ç»„çš„å…ƒç´ ** ä¾‹å­ï¼š

- ä½ å¯ä»¥é€šè¿‡ç´¢å¼•æ¥è®¿é—®ä¸€ä¸ªæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼›

```rust
let a = [1, 2, 3, 4, 5];

let first = a[0];
let second = a[1];
```



**éæ³•çš„æ•°ç»„å…ƒç´ è®¿é—®** ä¾‹å­ï¼š

```rust
fn main(){
    let a = [1, 2, 3, 4, 5];
    let index = 10;		// è¶…å‡ºç´¢å¼•èŒƒå›´

    let element = a[index];
    println!("The value of element is: {}", element);
}
/* è¾“å‡ºç»“æœï¼š
error: this operation will panic at runtime
 --> src/main.rs:5:19
  |
5 |     let element = a[index];
  |                   ^^^^^^^^ index out of bounds: the length is 5 but the index is 10
  |
  = note: `#[deny(unconditional_panic)]` on by default

error: could not compile `variables` due to previous error
*/
```

**ä»£ç è§£æï¼š**

ç¨‹åºç¼–è¯‘å‘ç”Ÿé”™è¯¯ï¼š`a[index]`ç´¢å¼•è¶…å‡ºèŒƒå›´ï¼šé•¿åº¦ä¸º5ï¼Œä½†ç´¢å¼•ä¸º10ï¼›



### å‡½æ•°

- mainå‡½æ•° ç¨‹åºå¼€å§‹çš„åœ°æ–¹ï¼›
- Rustä»£ç ä½¿ç”¨è›‡å½¢å‘½åæ³•(snake case)æ¥ä½œä¸ºè§„èŒƒå‡½æ•°å’Œå˜é‡åç§°çš„é£æ ¼ï¼›
- è›‡å½¢å‘½åæ³•ï¼šåªä½¿ç”¨å°å†™çš„å­—æ¯è¿›è¡Œå‘½åï¼›å¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ï¼›

**è›‡å½¢å‘½åæ³•** ä¾‹å­ï¼š

```rust
fn main(){
    println!("Hello, world");
    
    another_function();
}
fn another_function(){
    println!("Another function.");
}
/* è¾“å‡ºç»“æœï¼š
Hello, world
Another function.
*/
```

- å‡½æ•°å®šä¹‰ä»¥fnå…³é”®å­—å¼€å§‹ï¼Œç´§éšå‡½æ•°åç§°ä¸ä¸€å¯¹åœ†æ‹¬å·å’Œä¸€å¯¹èŠ±æ‹¬å·ï¼›
- èŠ±æ‹¬å·ç”¨äºæ ‡è¯†å‡½æ•°ä½“å¼€å§‹å’Œç»“æŸçš„åœ°æ–¹ï¼›
- æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡½æ•°ååŠ åœ†æ‹¬å·çš„æ–¹å¼æ¥è°ƒç”¨å‡½æ•°ï¼›

#### å‡½æ•°å‚æ•°

- å¯ä»¥åœ¨å‡½æ•°å£°æ˜ä¸­ å®šä¹‰å‚æ•°(parameter)ï¼›
- å®ƒä»¬æ˜¯ä¸€ç§ç‰¹æ®Šçš„å˜é‡ï¼Œå¹¶è¢«è§†ä½œå‡½æ•°ç­¾åçš„ä¸€éƒ¨åˆ†ï¼›
- ä½ éœ€è¦åœ¨è°ƒç”¨å‡½æ•°æ—¶ä¸ºè¿™äº›å˜é‡æä¾›å…·ä½“çš„å€¼ï¼›
- å‡½æ•°ç­¾åä¸­ï¼Œå¿…é¡»æ˜¾å¼åœ°å£°æ˜æ¯ä¸ªå‚æ•°çš„ç±»å‹ï¼Œå¤šä¸ªå‚æ•°ä½¿ç”¨éƒ½å¥½åˆ†éš”ï¼›
- å‡½æ•°å‚æ•°å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹ï¼›
- å‡½æ•°å‚æ•°åˆ†ä¸ºä¸¤ç§ï¼šå®å‚æˆ–å®é™…å‚æ•°(argument)ï¼Œå½¢å‚æˆ–å½¢å¼å‚æ•°(parameter)ï¼›

- å®å‚ï¼šå‡½æ•°è¢«è°ƒç”¨æ—¶ç»™å‡ºçš„å‚æ•°åŒ…å«äº†å®å®åœ¨åœ¨çš„æ•°æ®ï¼Œä¼šè¢«å‡½æ•°å†…éƒ¨çš„ä»£ç ä½¿ç”¨ï¼›
- å½¢å‚ï¼šåœ¨å‡½æ•°å®šä¹‰ä¸­å‡ºç°çš„å‚æ•°ï¼Œå®ƒæ²¡æœ‰æ•°æ®ï¼Œåªèƒ½ç­‰åˆ°å‡½æ•°è¢«è°ƒç”¨æ—¶æ¥æ”¶ä¼ é€’è¿›æ¥çš„æ•°æ®ï¼›

```rust
fn main(){ 
    let a = 5;			 // å®å‚
    let b = 6;		 	 // å®å‚
    let c = 7.2;		 	 // å®å‚
    another_function(a);  	 // ä¼ å‚
    another_function_1(a, b, c);  // ä¼ å‚
}
fn another_function(x: i32){	// å½¢å‚
    println!("The value of x is: {}", x);
}
fn another_function_1(x: i32, y: i32, z: f64){	// å½¢å‚
    println!("The value of x is: {}", x);
    println!("The value of y is: {}", y);
    println!("The value of z is: {}", z);
}
/* è¾“å‡ºç»“æœï¼š
The value of x is: 5
The value of x is: 5
The value of y is: 6
The value of z is: 7.2
*/
```



#### å‡½æ•°ä½“ä¸­çš„è¯­å¥å’Œè¡¨è¾¾å¼

- Rustæ˜¯ä¸€é—¨åŸºäºè¡¨è¾¾å¼çš„è¯­è¨€
- ä¸Cå’ŒRubyä¸åŒï¼ŒRustä¸­ä½¿ç”¨letè¯­å¥èµ‹å€¼ï¼Œèµ‹å€¼è¯­å¥ä¸ä¼šè¿”å›æ‰€èµ‹çš„å€¼ï¼›
- å‡½æ•°ä½“ç”±è‹¥å¹²æ¡è¯­å¥ç»„æˆï¼Œå®ƒå¯ä»¥ä»¥ä¸€ä¸ªè¡¨è¾¾å¼ä½œä¸ºç»“å°¾ï¼›
- Rustå°†è¯­å¥(statement)ï¼Œè¡¨è¾¾å¼(expression)åŒºåˆ†ä¸ºä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼›
- è¯­å¥ï¼šæ˜¯æŒ‡é‚£äº›æ‰§è¡Œæ“ä½œä½†ä¸è¿”å›å€¼çš„æŒ‡ä»¤ï¼›
- è¡¨è¾¾å¼ï¼šæ˜¯æŒ‡è¿›è¡Œè®¡ç®—å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªå€¼ä½œä¸ºç»“æœçš„æŒ‡ä»¤ï¼›

**è¯­å¥** ä¾‹å­ï¼š

```rust
fn main(){
    let y = 6;	// æ­£å¸¸: è¿™æ¡è¯­å¥åªè¿›è¡Œèµ‹å€¼æ“ä½œ
    let x = (let y = 6);	// é”™è¯¯: ä½ ä¸èƒ½å°†ä¸€æ¡letè¯­å¥èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡
}
```

- è°ƒç”¨å‡½æ•°æ˜¯è¡¨è¾¾å¼ï¼›
- è°ƒç”¨å®æ˜¯è¡¨è¾¾å¼ï¼›
- ä½¿ç”¨èŠ±æ‹¬å·{}åˆ›å»ºæ–°çš„ä½œç”¨åŸŸæ˜¯è¡¨è¾¾å¼

**è¡¨è¾¾å¼** ä¾‹å­ï¼š

```rust
fn main(){
    let x = 5;
    
    let y = {	// è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªä»£ç å—ï¼Œä»èŠ±æ‹¬å·å¼€å§‹ï¼Œå®ƒè®¡ç®—å‡º4ä½œä¸ºç»“æœ
        let x =3;
        x + 1	// è¿™æ˜¯è¡¨è¾¾å¼ï¼Œå‡å¦‚æœ«å°¾åŠ åˆ†å·å°±å˜ä¸ºè¯­å¥è€Œä¸ä¼šè¿”å›ä»»ä½•å€¼
    };
    println!("The value of y is: {}", y);
}
```



#### å‡½æ•°çš„è¿”å›å€¼

- å‡½æ•°å¯ä»¥å‘è°ƒç”¨å®ƒçš„ä»£ç è¿”å›å€¼ï¼Œä¸éœ€è¦ä¸ºè¿”å›å€¼å‘½åï¼Œä½†éœ€è¦åœ¨`->`åé¢å£°æ˜å®ƒçš„ç±»å‹ï¼›
- Rustä¸­å‡½æ•°çš„è¿”å›å€¼ç­‰åŒäºå‡½æ•°ä½“æœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼›
- å¯ä»¥ä½¿ç”¨`return`å…³é”®å­—æŒ‡å®šä¸€ä¸ªå€¼æ¥æå‰ä»å‡½æ•°ä¸­è¿”å›ï¼Œå¤§å¤šæ•°æƒ…å†µéƒ½æ˜¯éšå¼è¿”å›ï¼›

æ­£ç¡®ä¾‹å­ï¼š

```rust
fn five() -> i32 {
    5	// ä½œä¸ºè¡¨è¾¾å¼è¿”å›i32ç±»å‹çš„æ•°å€¼5
}
fn plus_one(x: i32) -> i32 {
    x + 1	// å°†æ•°å€¼åŠ 1åï¼Œä½œä¸ºè¡¨è¾¾å¼è¿”å›
}
fn main(){
    let x = five();
    let y = plus_one(5);
    println!("x is: {} \ny is: {}", x, y);
}
/* è¾“å‡ºç»“æœï¼š
x is: 5 
y is: 6
*/
```



é”™è¯¯ä¾‹å­ï¼š

```rust
fn plus_one(x: i32) -> i32 {
    x + 1;	// åœ¨æœ«å°¾åŠ äº†åˆ†å·
}
fn main(){
    let y = plus_one(5);
    println!("The value of y is: {}", y);
}
/* è¾“å‡ºç»“æœï¼š
error[E0308]: mismatched types
 --> src/main.rs:1:24
  |
1 | fn plus_one(x: i32) -> i32 {
  |    --------            ^^^ expected `i32`, found `()`
  |    |
  |    implicitly returns `()` as its body has no tail or `return` expression
2 |     x + 1;    // åœ¨æœ«å°¾åŠ äº†åˆ†å·
  |          - help: consider removing this semicolon

*/
```

**ä»£ç è§£æï¼š**

é”™è¯¯ä¿¡æ¯ï¼šmismatched typesï¼ˆç±»å‹ä¸åŒ¹é…ï¼‰ï¼›

ç”±äºåœ¨åº”è¯¥ç”¨æ¥è¿”å›å€¼çš„è¡¨è¾¾å¼æœ«å°¾åŠ äº†åˆ†å·ï¼Œè®©å…¶å˜æˆäº†è¯­å¥ï¼Œä½†æ˜¯è¯­å¥ä¸ä¼šè¿”å›å€¼ï¼Œæ‰€ä»¥Rusté»˜è®¤è¿”å›äº†ä¸€ä¸ªç©ºå…ƒç»„ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æè¿°çš„`()`ï¼Œå®é™…çš„è¿”å›å€¼ç±»å‹ä¸å‡½æ•°å®šä¹‰çš„ç±»å‹äº§ç”Ÿäº†çŸ›ç›¾ï¼Œè¿›è€Œè§¦å‘äº†ç¼–è¯‘æ—¶é”™è¯¯ï¼›

ç¼–è¯‘å™¨å»ºè®®æˆ‘ä»¬åˆ é™¤æœ«å°¾çš„åˆ†å·ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜ï¼›



### æ§åˆ¶æµ

- é€šè¿‡æ¡ä»¶æ¥æ‰§è¡Œæˆ–é‡å¤æ‰§è¡ŒæŸäº›ä»£ç æ˜¯å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€ç»„æˆéƒ¨åˆ†ï¼›
- åœ¨Rustä¸­ç”¨æ¥æ§åˆ¶ç¨‹åºæ‰§è¡Œæµçš„ç»“æ„ä¸»è¦å°±æ˜¯ `if`è¡¨è¾¾å¼ ä¸ å¾ªç¯è¡¨è¾¾å¼ï¼›

#### if è¡¨è¾¾å¼

- ifè¡¨è¾¾å¼å…è®¸æˆ‘ä»¬æ ¹æ®æ¡ä»¶æ‰§è¡Œä¸åŒçš„ä»£ç åˆ†æ”¯ï¼›
- å‡å¦‚æ¡ä»¶æ»¡è¶³åˆ™è¿è¡Œè¿™æ®µä»£ç ï¼Œå¦åˆ™è·³è¿‡æ‰§è¡Œï¼›

ä¾‹å­ï¼š

```rust
fn main (){
    let number = 6;
    
    if number % 4 == 0 {
        println!("number is divisible by 4");
    } else if number % 3 == 0 {
        println!("number is divisible by 3");
    } else if number % 2 == 0 {
        println!("number is divisible by 2");
    } else {
        println!("number is divisible by 4, 3, or 2");
    }
}
/* è¾“å…¥ç»“æœï¼š
number is divisible by 3
*/
```

##### åœ¨letè¯­å¥ä¸­ä½¿ç”¨if

- ifæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€ä»¥å¯ä»¥åœ¨letè¯­å¥çš„å³ä¾§ä½¿ç”¨å®ƒç”Ÿæˆä¸€ä¸ªå€¼ï¼›
- ä»£ç å—è¾“å‡ºçš„å€¼å°±æ˜¯å…¶ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼›
- æ•°å­—æœ¬èº«ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼ä½¿ç”¨ï¼›
- æ‰€æœ‰ifåˆ†æ”¯å¯èƒ½è¿”å›çš„å€¼éƒ½å¿…é¡»æ˜¯ä¸€ç§ç±»å‹çš„ï¼›
- å‡å¦‚åˆ†æ”¯è¡¨è¾¾å¼äº§ç”Ÿçš„ç±»å‹æ— æ³•åŒ¹é…ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘ç¼–è¯‘æ—¶é”™è¯¯ï¼›

ä¾‹å­ï¼š

```rust
fn main(){
    let condition = true;
    let number = if condition {
        5
    } else {
        6
    };
    println!(" The value of number is: {}", number);
}
/* è¾“å‡ºç»“æœï¼š
The value of number is: 5
*/
```



#### å¾ªç¯

- å¾ªç¯ï¼šå³å¾ªç¯æ‰§è¡Œå¾ªç¯ä½“ä¸­çš„ä»£ç ç›´åˆ°ç»“å°¾ï¼Œå¹¶ä¸”ç´§æ¥ç€å›åˆ°å¼€å¤´ç»§ç»­æ‰§è¡Œï¼›
- Rustæä¾›ä¸‰ç§å¾ªç¯ï¼šloopï¼Œwhileï¼Œforï¼›

##### loopå¾ªç¯

- åå¤æ‰§è¡ŒæŸä¸€å—ä»£ç ï¼Œç›´åˆ°æˆ‘ä»¬æ˜¾å¼åœ°å£°æ˜é€€å‡ºä¸ºæ­¢ï¼›

ä¾‹å­ï¼š

```rust
fn main(){
    loop {
        println!("again!");
    }
}
```

**ä»£ç è§£æï¼š**

è¿è¡Œè¿™æ®µç¨‹åºï¼Œé™¤éæˆ‘ä»¬æ‰‹åŠ¨å¼ºåˆ¶é€€å‡º`Ctrl + c` å¦åˆ™å°†ä¸€ç›´å¾ªç¯å¾€å¤æ‰§è¡Œï¼Œå³æ­»å¾ªç¯ï¼›



**ä»loopå¾ªç¯ä¸­è¿”å›å€¼ï¼Œä½¿ç”¨breakè‡ªåŠ¨ç»ˆæ­¢**

```rust
fn main() {
    let mut counter = 0;
    let result  = loop {
        counter += 1;
        if counter == 10 {
            break counter * 2;
        }
    };
    println!("The result is {}", result);
}
```



##### while æ¡ä»¶å¾ªç¯

ä¾‹å­ï¼š 

```rust
fn main() {
    let mut number = 3;
    while number != 0 {
        println!("{}!",number);
        number = number - 1;
    }
    println!("LIFTOFF!!!");
}
/* è¾“å‡ºç»“æœï¼š
3!
2!
1!
LIFTOFF!!!
*/
```

ä½¿ç”¨whileå¾ªç¯éå†é›†åˆä¸­æ¯ä¸ªå…ƒç´   ä¾‹å­ï¼š

- æ­¤ç±»ä»£ç éå¸¸å®¹æ˜“å‡ºé”™ï¼Œå¯èƒ½ä¼šå› ä¸ºä½¿ç”¨äº†ä¸æ­£ç¡®çš„ç´¢å¼•é•¿åº¦è€Œä½¿ç¨‹åºå´©æºƒï¼Œè€Œä¸”è¿è¡Œæ•ˆç‡ä½ï¼›

```rust
fn main(){
    let a = [10, 20, 30, 40, 50];
    let mut index = 0;
    
    while index < 5 {
        println!("The value is: {}", a[index]);
        index = index + 1;
    }
}
/* è¾“å‡ºç»“æœï¼š
The value is: 10
The value is: 20
The value is: 30
The value is: 40
The value is: 50
*/
```



##### for æ¡ä»¶å¾ªç¯

**ä½¿ç”¨foræ¥å¾ªç¯éå†é›†åˆ** ä¾‹å­ï¼š

- `.iter()` ï¼šæ ‡å‡†åº“ä¸­æä¾›çš„Rangeï¼Œç”¨æ¥ç”Ÿæˆä»ä¸€ä¸ªæ•°å­—å¼€å§‹åˆ°å¦ä¸€ä¸ªæ•°å­—ç»“æŸä¹‹å‰çš„æ‰€æœ‰æ•°å­—åºåˆ—ï¼›

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];
    for element in a.iter() {
        println!(" The value is: {}", element);
    }
}
/* è¾“å‡ºç»“æœï¼š
 The value is: 10
 The value is: 20
 The value is: 30
 The value is: 40
 The value is: 50
 */
```

**forå¦‚ä½•å°†å¾ªç¯åºåˆ—ç¿»è½¬** ä¾‹å­

- `.rev()`ï¼šæ ‡å‡†åº“ä¸­æä¾›çš„Rangeï¼Œå°†æ•°å­—åºåˆ—ç¿»è½¬ï¼Œé…åˆ`.iter()`æ¥ç”Ÿæˆä¸€ä¸ªä»å¤§åˆ°å°çš„æ•°å­—åºåˆ—ï¼›

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];
    for element in a.iter().rev() {  // åœ¨ç»“å°¾åŠ .rev()
        println!(" The value is: {}", element);
    }
}
/* è¾“å‡ºç»“æœï¼š
 The value is: 50
 The value is: 40
 The value is: 30
 The value is: 20
 The value is: 10
 */
```

å¦ä¸€ç§æ–¹å¼ï¼š

```rust
fn main() {
    for number in (1..4).rev() {
        println!("{}", number);
    }
    println!("LIFTOFF!!!");
}
/* è¾“å‡ºç»“æœï¼š
3
2
1
LIFTOFF!!!E
*/
```



## ç¬¬4ç«  è®¤è¯†æ‰€æœ‰æƒ

- æ ˆå’Œå †éƒ½æ˜¯ä»£ç è¿è¡Œæ—¶å¯ä»¥ä½¿ç”¨çš„å†…å­˜ç©ºé—´ï¼Œä½†å®ƒä»¬é€šå¸¸ä»¥ä¸åŒçš„ç»“æ„ç»„ç»‡è€Œæˆï¼›

- æ ˆ(Stack)ï¼šä»¥æˆ‘ä»¬æ”¾å…¥å€¼æ—¶çš„é¡ºåºæ¥å­˜å‚¨å®ƒä»¬ï¼Œå¹¶ä»¥ç›¸åçš„é¡ºåºå°†å€¼å–å‡ºï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œåè¿›å…ˆå‡ºâ€ç­–ç•¥ï¼›
    - æ‰€æœ‰å­˜å‚¨åœ¨æ ˆä¸­çš„æ•°æ®éƒ½å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªå·²çŸ¥ä¸”å›ºå®šçš„å¤§å°ï¼›
    - å…¥æ ˆï¼šæ·»åŠ æ•°æ®ï¼›
    - å‡ºæ ˆï¼šæº¢å‡ºæ•°æ®ï¼›

- å †(Heap)ï¼šç©ºé—´ç®¡ç†è¾ƒä¸ºæ¾æ•£ï¼Œå­˜å‚¨åœ¨ç¼–è¯‘æœŸæ— æ³•ç¡®å®šå¤§å°çš„æ•°æ®ï¼›
    - å †åˆ†é…(åˆ†é…)ï¼šå½“å‘å †è¯·æ±‚ç‰¹å®šå¤§å°çš„ç©ºé—´æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šæ ¹æ®ä½ çš„è¯·æ±‚åœ¨å †ä¸Šå¯»æ‰¾ä¸€å—è¶³å¤Ÿå¤§çš„å¯ç”¨ç©ºé—´ï¼Œå°†å®ƒæ ‡è®°ä¸ºå·²ä½¿ç”¨ï¼Œå¹¶å°†æŒ‡å‘è¿™ç‰‡ç©ºé—´çš„åœ°å€è¿”å›ç»™æˆ‘ä»¬ï¼Œ
    - å¦‚æœå°†å€¼å‹å…¥æ ˆä¸å«åˆ†é…ï¼ŒæŒ‡é’ˆå¤§å°æ˜¯å›ºå®šçš„ä¸”å¯ä»¥åœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œæ‰€ä»¥å¯ä»¥å°†æŒ‡é’ˆå­˜å‚¨åœ¨æ ˆä¸­ï¼Œå½“æƒ³è¦è®¿é—®æŒ‡å‘çš„æ•°æ®æ—¶ï¼Œå¯ä»¥é€šè¿‡æŒ‡é’ˆæŒ‡å‘çš„åœ°å€æ¥è®¿é—®ï¼›

- ç”±äºè®¿é—®å †ä¸Šçš„æ•°æ®å¤šäº†æŒ‡é’ˆè·³è½¬çš„ç¯èŠ‚ï¼Œæ‰€ä»¥ç›¸æ¯”æ ˆï¼Œè®¿é—®å †ä¸Šçš„æ•°æ®è¦æ…¢ä¸€äº›ï¼›
- å¤„ç†å™¨åœ¨æ“ä½œæ’å¸ƒç´§å¯†çš„æ•°æ®(æ¯”å¦‚åœ¨æ ˆä¸Š)æ—¶è¦æ¯”æ“ä½œæ’å¸ƒç¨€ç–çš„æ•°æ®(æ¯”å¦‚åœ¨å †ä¸Š)æœ‰æ•ˆç‡çš„å¤šï¼Œå¦å¤–åˆ†é…å‘½ä»¤æœ¬èº«ä¹Ÿå¯èƒ½æ¶ˆè€—ä¸å°‘æ—¶é’Ÿå‘¨æœŸï¼›

### æ‰€æœ‰æƒè§„åˆ™

- Rustä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å˜é‡ï¼Œä½œä¸ºä»–çš„æ‰€æœ‰è€…ï¼›
- æ¯ä¸ªå€¼åŒæ—¶åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ï¼›
- å½“æ‰€æœ‰è€…ç¦»å¼€è‡ªå·±çš„ä½œç”¨åŸŸæ—¶ï¼Œå®ƒæŒæœ‰çš„å€¼å°±ä¼šè¢«é‡Šæ”¾æ‰ï¼›

### å˜é‡ä½œç”¨åŸŸ

- å˜é‡åœ¨è¿›å…¥ä½œç”¨åŸŸæ˜¯ä¼šä¿æŒè‡ªå·±çš„æœ‰æ•ˆæ€§ï¼Œç›´åˆ°è‡ªå·±ç¦»å¼€ä½œç”¨åŸŸä¸ºæ­¢ï¼›

ä¾‹å­1ï¼š

```rust
fn main() {
    // ä¸å¯ç”¨ å˜é‡x è¿˜æœªç”Ÿæˆ
    let x = "hello";    // å˜é‡x çš„ä½œç”¨åŸŸå¼€å§‹
    fn prs() {  // ä¸€ä¸ªæ–°çš„å‡½æ•°å—ï¼Œæ­¤å—ä¸­ä¸åŒ…å«å˜é‡x 
        println!("{}", x);  // è¿™é‡Œå°†ç¼–è¯‘é”™è¯¯
    }

    println!("{}", x);
}   // å˜é‡x çš„ä½œç”¨åŸŸç»ˆæ­¢
```



### String ç±»å‹

- å½“åˆ›å»ºä¸€ä¸ªStringç±»å‹æ—¶ï¼ŒRustä¼šå°†å®ƒå­˜å‚¨åœ¨å †ä¸Šï¼›
- å¯ä»¥è°ƒç”¨`from`å‡½æ•°æ ¹æ®å­—ç¬¦ä¸²å­—é¢é‡ï¼Œåˆ›å»ºä¸€ä¸ªStringç±»å‹ï¼›
    - è¿™é‡Œä½¿ç”¨åŒå†’å·( :: )è¿ç®—ç¬¦ï¼Œå®ƒå…è®¸è°ƒç”¨Stringå‘½åç©ºé—´ä¸‹ç‰¹å®šçš„fromå‡½æ•°

```rust
let S = String::from("hello");
```

è¿˜å¯ä»¥ç”Ÿæˆä¸€ä¸ªå¯å˜çš„ï¼Œå¹¶åœ¨åé¢ç»§ç»­æ·»åŠ å­—é¢é‡

```rust
fn main(){
    let mut S = String::from("Hello");
    // .push_str() å‡½æ•°å‘Stringç©ºé—´çš„å°¾éƒ¨æ·»åŠ äº†ä¸€æ®µå­—é¢é‡â€œ,world!â€
    S.push_str(", world!");
    println!("{}", S);
}
```



### å†…å­˜ä¸åˆ†é…

```rust
{
    let s = String::from("hello");	// ä»è¿™é‡Œå¼€å§‹ï¼Œå˜é‡s å˜å¾—æœ‰æ•ˆï¼›
    // æ‰§è¡Œä¸så˜é‡çš„ç›¸å…³æ“ä½œï¼›
}	// å˜é‡s åœ¨è¿™é‡Œç¦»å¼€ä½œç”¨åŸŸï¼Œå³å˜é‡å¤±æ•ˆï¼›
```

- å˜é‡åœ¨ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼ŒRustä¼šè°ƒç”¨dropçš„ç‰¹æ®Šå‡½æ•°ï¼Œå°†ç”¨æ¥å­˜å‚¨å˜é‡çš„å†…å­˜é‡Šæ”¾ï¼›

**å˜é‡å’Œæ•°æ®äº¤äº’çš„æ–¹å¼ï¼šç§»åŠ¨**

å°†å˜é‡xçš„å€¼é‡æ–°ç»‘å®šåˆ°å˜é‡yä¸Šï¼š

```rust
let x = 5;
let y = x;
```



``` rust
let s1 = String::from("hello");
let s2 = s1;
```

- å½“åˆ›å»ºStringç±»å‹æ—¶ï¼ŒRustä¼šå‘ç³»ç»Ÿç”³è¯·ä¸€å—å †å†…å­˜ï¼Œå°†æŒ‡å‘å­˜æ”¾å­—ç¬¦ä¸²å†…å®¹çš„æŒ‡é’ˆ(ptr)ï¼Œé•¿åº¦(len)ï¼ŒåŠä¸€ä¸ªå®¹é‡(capacity)ï¼Œè¿™ä¸‰æ ·ä¸œè¥¿ï¼Œå­˜æ”¾è‡³æ ˆä¸Šï¼›



- å½“ä¸€ä¸ªå˜é‡ç¦»å¼€å½“å‰ä½œç”¨åŸŸæ—¶ï¼ŒRustä¼šè‡ªåŠ¨è°ƒç”¨Dropå‡½æ•°ï¼Œå¹¶å°†å˜é‡ä½¿ç”¨çš„å †å†…å­˜é‡Šæ”¾å›æ”¶ï¼›

```rust
fn main(){
    s1 = 2;
    s2 = s1;
    println!("s1 = {}, s2 = {}", s1, s2);
}
```

- ç”±äºæ•´å½¢ç±»å‹å¯ä»¥åœ¨ç¼–è¯‘æ—¶ç¡®å®šè‡ªå·±çš„å¤§å°ï¼Œä¸”æ•°æ®å®Œæ•´åœ°å­˜å‚¨åœ¨æ ˆä¸Šï¼Œæ‰€æœ‰å¯¹äºè¿™ç±»å‹å€¼çš„copyæ°¸è¿œéƒ½æ˜¯å¿«é€Ÿçš„ï¼Œä¸Stringç±»å‹ä¸åŒï¼ŒRustä¸ä¼šé˜»æ­¢æ•´æ•°ç±»å‹çš„æœ‰æ•ˆæ€§ï¼›





**å˜é‡å’Œæ•°æ®çš„äº¤äº’æ–¹å¼ï¼šå…‹éš†**

```rust
let s1 = String::from("hello");
let s2 = s1.clone();

println!("s1 = {}, s2 = {}", s1, s2);
```

- ä»»ä½•**ç®€å•æ ‡é‡**çš„ç»„åˆç±»å‹éƒ½å¯ä»¥æ˜¯Copyçš„ï¼›
- ä»»ä½•éœ€è¦åˆ†é…å†…å­˜æˆ–æŸç§èµ„æºçš„ç±»å‹éƒ½ä¸ä¼šæ˜¯Copyçš„ï¼›

æ‹¥æœ‰Copy traitçš„ç±»å‹æœ‰ï¼š

- æ‰€æœ‰çš„æ•´æ•°ç±»å‹ï¼›
- ä»…æ‹¥æœ‰ä¸¤ç§å€¼(true or false)çš„å¸ƒå°”ç±»å‹ï¼šboolï¼›
- å­—ç¬¦ç±»å‹ï¼šcharï¼›
- æ‰€æœ‰çš„æµ®ç‚¹ç±»å‹ï¼›
- å¦‚æœå…ƒç»„æ‰€åŒ…å«çš„æ‰€æœ‰å­—æ®µä»…æ‹¥æœ‰ä»¥ä¸Š4ç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç»„ä¹Ÿå¯ä»¥Copyï¼›



### æ‰€æœ‰æƒä¸å‡½æ•°

- å°†å€¼ä¼ é€’ç»™å‡½æ•°åœ¨è¯­ä¹‰ä¸Šç±»å‹ä¸å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼›
- å°†å˜é‡ä¼ é€’ç»™å‡½æ•°å°†ä¼šè§¦å‘ç§»åŠ¨æˆ–å¤åˆ¶ï¼›

```rust
fn main() {
    let s = String::from("hello");  // å˜é‡s è¿›å…¥ä½œç”¨åŸŸ
    takes_ownership(s); // sçš„å€¼è¢«ç§»åŠ¨è‡³å‡½æ•°
}

fn takes_ownership(some: String) { // å˜é‡some è¿›å…¥ä½œç”¨åŸŸ
    println!("{}", some);
}// some ç¦»å¼€ä½œç”¨ä¸ï¼Œdropå‡½æ•°è‡ªåŠ¨è°ƒç”¨ï¼Œsomeè¢«æ¸…ç†
```



### å¼•ç”¨ä¸å€Ÿç”¨

```rust
fn main() { 
    let s1 = String::from("hello"); 
    let len = str_len(&s1); 
    println!("The length of '{}' is {}.", s1, len); 
} 
   fn str_len(s: &String) -> usize { 
    s.len() 
}
```



- å¼•ç”¨è¿ç®—ç¬¦ï¼š`&`ï¼Œå…è®¸åœ¨ä¸è·å–æ‰€æœ‰æƒçš„å‰æä¸‹ä½¿ç”¨å€¼ï¼›
- è§£å¼•ç”¨è¿ç®—ç¬¦ï¼š`*`





















## ç¬¬5ç«  ä½¿ç”¨ç»“æ„ä½“æ¥ç»„ç»‡ç›¸å…³è”çš„æ•°æ®







Q











## ç¬¬6ç«  æšä¸¾ä¸æ¨¡å¼åŒ¹é…



















## ç¬¬7ç«  ä½¿ç”¨åŒ…ï¼Œå•å…ƒåŒ…åŠæ¨¡å—æ¥ç®¡ç†æ—¥æ¸å¤æ‚çš„é¡¹ç›®



















## ç¬¬8ç«  é€šç”¨é›†åˆç±»å‹





### å­—ç¬¦ä¸²

#### æ›´æ–°String

- `push_str()`æ–¹æ³• ï¼šæŠŠä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡é™„åŠ åˆ°`String`ï¼›

    - ```rust
        let mut s = String::from("foo");
        s.push_str("bar");
        ```

    - ```rust
        let mut s1 = String::from("foo");
        let s2 = "bar";
        s1.push_str(s2);
        println!("s2 is {}", s2);
        ```

- `push()`æ–¹æ³• ï¼šæŠŠå•ä¸ªå­—ç¬¦é™„åŠ åˆ°`String`ï¼›

    - ```rust
        let mut s = String::from("lo");
        s.push('l');
        ```

- `+`è¿ç®—ç¬¦ ï¼šè¿æ¥å­—ç¬¦ä¸²

    - ```rust
        let s1 = String::from("Hello, ");
        let s2 = String::from("world!");
        let s3 = s1 + "-" + &s2;
        ```

    - ä½¿ç”¨äº†ç±»ä¼¼è¿™ä¸ªç­¾åçš„æ–¹æ³•ï¼š

    -  ```rust
        fn add(self, s: &str) -> String {...}
        ```

        - æ ‡å‡†åº“ä¸­`add`æ–¹æ³•ä½¿ç”¨äº†æ³›å‹
        - åªèƒ½æŠŠ`&str`æ·»åŠ åˆ°`String`
        - è§£å¼•ç”¨å¼ºåˆ¶è½¬æ¢(deref coercion)

- `format!`å®ï¼šè¿æ¥å¤šä¸ªå­—ç¬¦ä¸²ï¼Œä¸ä¼šå¤ºå–ä»»ä½•å‚æ•°çš„æ‰€æœ‰æƒï¼› 

    - ```rust
        let s1 = String::from("tic");
        let s2 = String::from("tac");
        let s3 = String::from("toe");
        
        let s = format!("{}-{}-{}", s1, s2, s3);
        ```

- `println!`å®ï¼šå°†ç»“æœæ‰“å°åˆ°å±å¹•ï¼›









## ç¬¬9ç«  é”™è¯¯å¤„ç†



















## ç¬¬10ç«  æ³›å‹ï¼Œtraitä¸å£°æ˜å‘¨æœŸ

```rust 
// src/lib.rs

// å®šä¹‰ä¸€ä¸ªtrait åç§°ä¸ºï¼šSummary 
pub trait Summary {
    // å®šä¹‰ summarize æ–¹æ³•
    fn summarize(&self) -> String;
    // fn sumau(&self) -> String;
}

// å®šä¹‰ NewsArticle ç»“æ„ä½“
pub struct NewsArticle {
    pub headline: String,
    pub location: String,
    pub author: String,
    pub content: String,
}
// implå—åªæ˜¯fnå®šä¹‰çš„é›†åˆ
// implç¤ºä¾‹1: ä¸ºNewsArticleç»“æ„ä½“å®ç°Summary trait é›†åˆ
impl Summary for NewsArticle {
    // å®šä¹‰ Summary ä¸­ summarize æ–¹æ³•å…·ä½“çš„å®ç°
    fn summarize(&self) -> String {
        format!("{}, by {} ({})",self.headline, self.author, self.location)
    }
}
// implé›†åˆå†…çš„å‡½æ•°ï¼Œéƒ½ä¼šæˆä¸ºNewsArticleç»“æ„ä½“çš„æ–¹æ³•
// implç¤ºä¾‹2: ä¸º NewsArticle ç»“æ„ä½“å®šä¹‰æ–¹æ³•
impl NewsArticle {
    // å®šä¹‰æ–¹æ³•æˆå‘˜ summarize
    pub fn summarize(&self) -> String {
        format!("{}, by {} ({})",self.headline, self.author, self.location)
    }
}
// å®šä¹‰ Tweet ç»“æ„ä½“
pub struct Tweet {
    pub username: String,
    pub content: String,
    pub reply: bool,
    pub retweet: bool,
}
// ä¸º Tweet ç»“æ„ä½“å®ç°Summary trait
impl Summary for Tweet {
    // å®šä¹‰ summarize æ–¹æ³•å…·ä½“çš„å®ç°
    fn summarize(&self) -> String {
        format!("{}: {}", self.username, self.content)
    }
}
```



```rust
// src/main.rc

use variables::Summary;
use variables::Tweet;
use variables::NewsArticle;

fn main(){
    let tweet = Tweet {
        username: String::from("horse_ebooks"),
        content: String::from("of course, as you probably already know, people"),
        reply: false,
        retweet: false,
    };
    let newsa = NewsArticle {
        headline: String::from("Auins.sh"),
        author: String::from("Auroot"),
        location: String::from("2020"),
        content: String::from("2"),
    };
    println!("1 new tweet: {}", tweet.summarize());
    println!("1 new tweet: {}", newsa.summarize());
}
```



















## ç¬¬11ç«  ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•



















## ç¬¬12ç«  I/Oé¡¹ç›®ï¼šç¼–å†™ä¸€ä¸ªå‘½ä»¤è¡Œç¨‹åº



















## ç¬¬13ç«  å‡½æ•°å¼è¯­è¨€ç‰¹æ€§ï¼šè¿­ä»£å™¨ä¸é—­åŒ…



















## ç¬¬14ç«  è¿›ä¸€æ­¥è®¤è¯†CargoåŠcrates.io



















## ç¬¬15ç«  æ™ºèƒ½æŒ‡é’ˆ



















## ç¬¬16ç«  æ— ç•å¹¶å‘



















## ç¬¬17ç«  Rustçš„é¢å‘å¯¹è±¡ç¼–ç¨‹ç‰¹æ€§



















## ç¬¬18ç«  æ¨¡å¼åŒ¹é…



















## ç¬¬19ç«  é«˜çº§ç‰¹æ€§



















## ç¬¬20ç«  æ„å»ºå¤šçº¿ç¨‹WebæœåŠ¡å™¨



















## ä¸ªäººå­¦ä¹ æ€»ç»“

































